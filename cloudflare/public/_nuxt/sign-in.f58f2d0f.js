import{l as f,r as d,o as v,c as w,a as m,t as o,b as n,w as g,d as p,i as c,n as h,u as b}from"./entry.dc320ebb.js";/* empty css                */import{m as $}from"./md5.d8309aa2.js";const _={class:"signinPage"},y={class:"text-h4"},a=f(),i={position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!1,draggablePercent:.6,showCloseButtonOnHover:!0,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1},C={name:"MyComponent",data(){return{username:"",password:""}},methods:{async sign(){if(!this.username||!this.password)return a.error(this.$t("signin.invalid_params"),i),!1;const r=$(this.password),e=await $fetch("/api/usr/sign-in",{method:"POST",body:JSON.stringify({id:this.username,pwd:r})});e&&e.code==0?(a.success(this.$t("signin.success"),i),console.debug(e),sessionStorage.setItem("_cransurvey_token",e.token),sessionStorage.setItem("_cransurvey_usr",this.username),setTimeout(()=>{h(this.localePath("/dash"))},2e3)):(a.error(this.$t("signin.error")+" ("+this.$t("error_codes."+e.code)+")",i),console.warn(e))}}},O=Object.assign(C,{setup(r){return(e,s)=>{const l=d("v-text-field"),u=d("v-btn");return v(),w("div",_,[m("h4",y,o(e.$t("signin.signin")),1),n(l,{label:e.$t("signin.username"),modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=t=>e.username=t)},null,8,["label","modelValue"]),n(l,{label:e.$t("signin.password"),type:"password",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=t=>e.password=t)},null,8,["label","modelValue"]),m("p",null,[n(u,{variant:"tonal",class:"font-weight-bold",onClick:e.sign},{default:g(()=>[p(o(e.$t("signin.continue")),1)]),_:1},8,["onClick"]),n(u,{variant:"outlined",class:"font-weight-bold",onClick:s[2]||(s[2]=t=>("navigateTo"in e?e.navigateTo:c(h))(("useLocalePath"in e?e.useLocalePath:c(b))()("/sign-up"))),style:{"margin-left":"0.6rem"}},{default:g(()=>[p(o(e.$t("signin.or_signup")),1)]),_:1})])])}}});export{O as default};
