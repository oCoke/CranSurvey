import{l as w,r as p,o as c,c as v,a as m,t as i,b as o,w as g,d as h,i as f,n as l,u as b}from"./entry.d0f737aa.js";/* empty css                */import{m as $}from"./md5.d8309aa2.js";const V={class:"signinPage"},_={class:"text-h4"},a=w(),n={position:"top-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!1,draggablePercent:.6,showCloseButtonOnHover:!0,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1},y={name:"MyComponent",data(){return{username:"",password:"",password_re:""}},methods:{async sign(){if(!this.username||!this.password)return a.error(this.$t("signup.invalid_params"),n),!1;if(this.password_re!=this.password)return a.error(this.$t("signup.invalid_password"),n),!1;const u=$(this.password),s=await $fetch("/api/usr/sign-up",{method:"POST",body:JSON.stringify({id:this.username,pwd:u})});s&&s.code==0?(a.success(this.$t("signup.success"),n),console.debug(s),sessionStorage.setItem("_cransurvey_token",s.token),sessionStorage.setItem("_cransurvey_usr",this.username),s.init?(a.info(this.$t("signup.init"),n),setTimeout(()=>{l(this.localePath("/dash"))},2500)):setTimeout(()=>{l(this.localePath("/dash"))},2e3)):(a.error(this.$t("signup.error")+" ("+this.$t("error_codes."+s.code)+")",n),console.warn(s))}}},T=Object.assign(y,{setup(u){return(s,e)=>{const r=p("v-text-field"),d=p("v-btn");return c(),v("div",V,[m("h4",_,i(s.$t("signup.signup")),1),o(r,{label:s.$t("signup.username"),modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=t=>s.username=t)},null,8,["label","modelValue"]),o(r,{label:s.$t("signup.password"),type:"password",modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.password=t)},null,8,["label","modelValue"]),o(r,{label:s.$t("signup.password_re"),type:"password",modelValue:s.password_re,"onUpdate:modelValue":e[2]||(e[2]=t=>s.password_re=t)},null,8,["label","modelValue"]),m("p",null,[o(d,{variant:"tonal",class:"font-weight-bold",onClick:s.sign},{default:g(()=>[h(i(s.$t("signup.continue")),1)]),_:1},8,["onClick"]),o(d,{variant:"outlined",class:"font-weight-bold",onClick:e[3]||(e[3]=t=>("navigateTo"in s?s.navigateTo:f(l))(("useLocalePath"in s?s.useLocalePath:f(b))()("/sign-in"))),style:{"margin-left":"0.6rem"}},{default:g(()=>[h(i(s.$t("signup.or_signin")),1)]),_:1})])])}}});export{T as default};
